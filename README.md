# bibliblag_bot

telegram бот для библиотечной системы Благовещенска

функционал читательского бота
- проверить наличие книги в библиотечной системе
    - поиск в близжайших библиотеках
    - поиск в конкретной библиотеке
    - поиск во всей системе
- выбрать книгу из преложенных по поиску вариантов и забронировать её

- узнать о мероприятиях
филтры по месту
    - в конкретной библиотеке
    - в близжайшей библиотеке
    - во всех библиотеках
фильтры по дате
    - в веденную дату или промежуток времени
- подписаться на рассылку мероприятий
    - в конкретных библиотеках
        - указать в ручную
        - найти в шаговой доступности
    - во всех библиотеках

Пример сессии:
/start
- start message
/get_book
- введите имя книги
имя книги
- отфильровать по
в близжайшей библиотеке
- get location?
разрешить
- книги, отфильтрованные по близжайшим библиотекам
конкретней про книгу (номер книги)
- book page
запросить
- запрос отправлен, ожидайте ответа (keyboard: найти др книгу, мерприятия)
- в данный момент книга доступна в такой-то библиотеке. когда вы сможете за ней прийти? режим работы библиотеки, отказаться от книги
даты
- в период с по книга зарезервирована за вами, если у вас нет читательского билета, прихватите с собой паспорт (и родителей, если вам нет 14)

/events
- вы можете подписаться на расссылку мероприятий или узнать о близжайших мероприятиях
/рассылка
- выберите библиотеку вручную, найти библиотеки в шаговой доступности (требуется ваше месторасположение), подписаться на все блиотеки, отписаться от всех
1 3 5 2 подписаться 
- подтвержение



функционал библиотекарского бота
- зарегистрироваться в системе по токену библиотеки
- получить все запросы на книги
- отправить ответ на запрос
- удалиться из системы
- не показывать риал тайм запросы
- показывать риал тайм запросы
- получить справку о командах

пример сессии:
/start
- привязаться к библиотеке (требуется токен)
токен
- вы зарегистриравны как библиоткарь такой-то библиотки. справка по командам
получить все запросы на книги
- запросы (по дате добавления)
ответ на запрос -в наличии (на руках)
- не показывать риал тайм запросы

бдшечка

для хранения инфы о запросах на книги нужна след таблица:
имя юзера, user_id, название книги от бота, библиотека, дата

    requests
    -------
    id          primary key
    user_id
    user_name
    book_name
    library
    date
    book_available


для хранения сведений о библиотекарях:
user_id библиотекаря, его имя, библиотека в которой он работает, состояние mute/unmute

    librarians
    ----------
    user_id     primary key autoincrement
    name
    library
    mute


Опросы
poll = telebot.types.Poll(question = …)
poll.add(answer1)
poll.add(answer2)
bot.send_poll(chat_id = …, poll = poll, reply_markup = …)